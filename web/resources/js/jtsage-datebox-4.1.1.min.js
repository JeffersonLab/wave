!function(e){e.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{version:"4.1.1",jqmVersion:"1.4.5",bootstrapVersion:"3.3.7",bootstrap4Version:"4.0.0a6",jqmuiWidgetVersion:"1.11.4",theme:!1,themeDefault:"a",themeHeader:"a",themeSetButton:"a",themeCloseButton:"a",mode:!1,transition:"fade",useAnimation:!0,hideInput:!1,hideContainer:!1,lockInput:!0,zindex:"1100",clickEvent:"vclick",clickEventAlt:"click",useKinetic:!0,defaultValue:!1,showInitialValue:!1,linkedField:!1,linkedFieldFormat:"%J",popupPosition:!1,popupButtonPosition:"left",popupForceX:!1,popupForceY:!1,useModal:!0,useModalTheme:"b",useInline:!1,useInlineBlind:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!1,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,useTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDays:!1,whiteDates:!0,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{"default":{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},themeDateToday:"b",themeDayHigh:"b",themeDatePick:"b",themeDateHigh:"b",themeDateHighAlt:"b",themeDateHighRec:"b",themeDate:"a",themeButton:"a",themeInput:"",themeClearButton:"a",themeCancelButton:"a",themeTomorrowButton:"a",themeTodayButton:"a",buttonIconDate:"calendar",buttonIconTime:"clock",disabledState:"ui-state-disabled",calNextMonthIcon:"plus",calPrevMonthIcon:"minus",btnCls:" ui-corner-all ui-btn ui-btn-",icnCls:" ui-btn-icon-notext ui-icon-",s:{cal:{prevMonth:"{text}",nextMonth:"{text}",botButton:"<a href='#' class='{cls} {icon}' role='button'>{text}</a>"}},validHours:!1,flen:{y:25,m:24,d:40,h:24,i:30},durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1}},_getLongOptions:function(e){var t,a,n={},i="datebox",o=7;for(t in e.data())t.substr(0,o)===i&&t.length>o&&(a=t.substr(o),a=a.charAt(0).toLowerCase()+a.slice(1),"options"!==a&&(n[a]=e.data(t)));return n},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},_enhanceDate:function(){e.extend(this._date.prototype,{copy:function(t,a){return t=e.extend([0,0,0,0,0,0,0],t),a=e.extend([0,0,0,0,0,0,0],a),new Date(a[0]>0?a[0]:this.get(0)+t[0],a[1]>0?a[1]:this.get(1)+t[1],a[2]>0?a[2]:this.get(2)+t[2],a[3]>0?a[3]:this.get(3)+t[3],a[4]>0?a[4]:this.get(4)+t[4],a[5]>0?a[5]:this.get(5)+t[5],a[6]>0?a[5]:this.get(6)+t[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;3>t;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;6>t;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),this.get(2)>10&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&this.getDate()>28?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1,1>a?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_ord:{"default":function(e){var t=e%10;return e>9&&21>e||t>3?"th":["th","st","nd","rd"][t]}},_customformat:{"default":function(){return!1}},_formatter:function(e,t,a){var n,i=this,o=this.options,s=0;return"undefined"==typeof a&&(a=!0),"dura"===o.mode.substr(0,4)&&(s=i._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(s[1]+=24*s[0]),e.match(/%Dl/)||(s[2]+=60*s[1]),e.match(/%DM/)||(s[3]+=60*s[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,a,r){if("X"===a)return"undefined"!=typeof i._customformat[o.mode]?i._customformat[o.mode](r,t,o):e;if("D"===a)switch(r){case"d":return s[0];case"l":return i._zPad(s[1]);case"M":return i._zPad(s[2]);case"S":return i._zPad(s[3]);case"A":return i.__("durationDays")[1===s[0]?0:1];default:return e}switch(r){case"a":return i.__("daysOfWeekShort")[t.getDay()];case"A":return i.__("daysOfWeek")[t.getDay()];case"b":return i.__("monthsOfYearShort")[t.getMonth()];case"B":return i.__("monthsOfYear")[t.getMonth()];case"C":return parseInt(t.getFullYear()/100);case"d":return i._zPad(t.getDate(),a);case"H":case"k":return i._zPad(t.getHours(),a);case"I":case"l":return i._zPad(t.get12hr(),a);case"m":return i._zPad(t.getMonth()+1,a);case"M":return i._zPad(t.getMinutes(),a);case"p":case"P":return n=i.__("meridiem")[t.get(3)<12?0:1].toUpperCase(),"P"===r?n.toLowerCase():n;case"s":return t.getEpoch();case"S":return i._zPad(t.getSeconds(),a);case"u":return i._zPad(t.getDay()+1,a);case"w":return t.getDay();case"y":return i._zPad(t.getFullYear()%100);case"Y":return t.getFullYear();case"E":return t.getFullYear()+543;case"V":return i._zPad(t.getDWeek(4),a);case"U":return i._zPad(t.getDWeek(0),a);case"W":return i._zPad(t.getDWeek(1),a);case"o":return"undefined"!=typeof i._ord[o.useLang]?i._ord[o.useLang](t.getDate()):i._ord["default"](t.getDate());case"j":return n=new Date(t.getFullYear(),0,1),n="000"+String(Math.ceil((t-n)/864e5)+1),n.slice(-3);case"J":return t.toJSON();case"G":return n=t.getFullYear(),1===t.getDWeek(4)&&t.getMonth()>0?n+1:t.getDWeek(4)>51&&t.getMonth()<11?n-1:n;case"g":return n=t.getFullYear%100,1===t.getDWeek(4)&&t.getMonth()>0&&++n,t.getDWeek(4)>51&&t.getMonth()<11&&--n,i._zpad(n);default:return e}}),i.__("useArabicIndic")===!0&&a===!0&&(e=i._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,n=e%t;t>1&&n>0&&(0>a?e-=n:a>0?e+=t-n:t/2>e%t?e-=n:e+=t-n,this.theDate.setMinutes(e))},_check:function(){var t,a,n,i,o,s,r=this,d=this.options,u=this.theDate;if(r.dateOK=!0,"undefined"==typeof d.mode)return!0;if(d.afterToday&&(t=new r._date,t>u&&(u=t)),d.beforeToday&&(t=new r._date,u>t&&(u=t)),d.maxDays!==!1&&(t=new r._date,t.adj(2,d.maxDays),u>t&&(u=t)),d.minDays!==!1&&(t=new r._date,t.adj(2,-1*d.minDays),t>u&&(u=t)),d.minHour!==!1&&u.get(3)<d.minHour&&u.setD(3,d.minHour),d.maxHour!==!1&&u.get(3)>d.maxHour&&u.setD(3,d.maxHour),d.minTime!==!1&&(t=new r._date,s=d.minTime.split(":"),t.setD(3,s[0]).setD(4,s[1]),t>u&&(u=t)),d.maxTime!==!1&&(t=new r._date,s=d.maxTime.split(":"),t.setD(3,s[0]).setD(4,s[1]),u>t&&(u=t)),d.maxYear!==!1&&(t=new r._date(d.maxYear,11,31),u>t&&(u=t)),d.minYear!==!1&&(t=new r._date(d.minYear,0,1),t>u&&(u=t)),"time"===d.mode.substr(0,4)||"dur"===d.mode.substr(0,3))"timeflipbox"===d.mode&&d.validHours!==!1&&e.inArray(u.get(3),d.validHours)<0&&(r.dateOK=!1);else{if(d.blackDatesRec!==!1)for(a=u.get(0),n=u.get(1),i=u.get(2),o=0;o<d.blackDatesRec.length;o++)-1!==d.blackDatesRec[o][0]&&d.blackDatesRec[o][0]!==a||-1!==d.blackDatesRec[o][1]&&d.blackDatesRec[o][1]!==n||-1!==d.blackDatesRec[o][2]&&d.blackDatesRec[o][2]!==i||(r.dateOK=!1);d.blackDates!==!1&&e.inArray(u.iso(),d.blackDates)>-1&&(r.dateOK=!1),d.blackDays!==!1&&e.inArray(u.getDay(),d.blackDays)>-1&&(r.dateOK=!1),d.whiteDates!==!1&&e.inArray(r.theDate.iso(),d.whiteDates)>-1&&(r.dateOK=!0,u=r.theDate)}r.theDate=u},_fixstepper:function(t){var a=this.options.durationSteppers,n=this.options.durationStep;e.inArray("d",t)>-1&&(a.d=n),e.inArray("h",t)>-1&&(a.d=1,a.h=n),e.inArray("i",t)>-1&&(a.h=1,a.i=n),e.inArray("s",t)>-1&&(a.i=1,a.s=n)},_parser:{"default":function(){return!1}},_makeDate:function(t){var a,n,i,o,s=this,r=this.options,d=this.options.defaultValue,u=s.__fmt(),l=null,c=[],p=new s._date,h={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(t=e.trim(s.__("useArabicIndic")===!0&&"undefined"!=typeof t?s._dRep(t,-1):t),"undefined"==typeof r.mode)return p;if("undefined"!=typeof s._parser[r.mode])return s._parser[r.mode].apply(s,[t]);if("durationbox"===r.mode||"durationflipbox"===r.mode){if(u=u.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),u=new RegExp("^"+u+"$"),l=u.exec(t),i=u.exec(s.__fmt()),null===l||l.length!==i.length)return"number"==typeof d&&d>0?new s._date(1e3*(s.initDate.getEpoch()+parseInt(d,10))):new s._date(s.initDate.getTime());for(n=s.initDate.getEpoch(),a=1;a<l.length;a++)o=parseInt(l[a],10),i[a].match(/^%Dd$/i)&&(n+=86400*o),i[a].match(/^%Dl$/i)&&(n+=3600*o),i[a].match(/^%DM$/i)&&(n+=60*o),i[a].match(/^%DS$/i)&&(n+=o);return new s._date(1e3*n)}if("%J"===u)return p=new s._date(t),isNaN(p.getDate())&&(p=new s._date),p;if(u=u.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(c.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return c.pop(),".+?"}}),u=new RegExp("^"+u+"$"),l=u.exec(t),i=u.exec(s.__fmt()),null===l||l.length!==i.length){if(d!==!1&&""!==d)switch(typeof d){case"object":e.isFunction(d.getDay)?p=d:3===d.length&&(p=s._pa(d,"time"===r.mode.substr(0,4)?p:!1));break;case"number":p=new s._date(1e3*d);break;case"string":"time"===r.mode.substr(0,4)?(n=e.extend([0,0,0],d.split(":")).slice(0,3),p=s._pa(n,p)):(n=e.extend([0,0,0],d.split("-")).slice(0,3),n[1]--,p=s._pa(n,!1))}isNaN(p.getDate())&&(p=new s._date)}else{for(a=1;a<l.length;a++)switch(o=parseInt(l[a],10),c[a-1]){case"s":return new s._date(1e3*parseInt(l[a],10));case"Y":case"G":h.year=o;break;case"E":h.year=o-543;break;case"y":case"g":r.afterToday||38>o?h.year=2e3+o:h.year=1900+o;break;case"m":h.mont=o-1;break;case"d":h.date=o;break;case"H":case"k":case"I":case"l":h.hour=o;break;case"M":h.mins=o;break;case"S":h.secs=o;break;case"u":h.wday=o-1;break;case"w":h.wday=o;break;case"j":h.yday=o;break;case"V":h.week=o,h.wtyp=4;break;case"U":h.week=o,h.wtyp=0;break;case"W":h.week=o,h.wtyp=1;break;case"p":case"P":o=new RegExp("^"+l[a]+"$","i"),h.meri=o.test(s.__("meridiem")[0])?-1:1;break;case"b":n=e.inArray(l[a],s.__("monthsOfYearShort")),n>-1&&(h.mont=n);break;case"B":n=e.inArray(l[a],s.__("monthsOfYear")),n>-1&&(h.mont=n)}if(0!==h.meri&&(-1===h.meri&&12===h.hour&&(h.hour=0),1===h.meri&&12!==h.hour&&(h.hour=h.hour+12)),p=new s._date(s._n(h.year,0),s._n(h.mont,0),s._n(h.date,1),s._n(h.hour,0),s._n(h.mins,0),s._n(h.secs,0),0),h.year<100&&-1!==h.year&&p.setFullYear(h.year),h.mont>-1&&h.date>-1||h.hour>-1&&h.mins>-1&&h.secs>-1)return p;h.week!==!1&&(p.setDWeek(h.wtyp,h.week),h.date>-1&&p.setDate(h.date)),h.yday!==!1&&p.setD(1,0).setD(2,1).adj(2,h.yday-1),h.wday!==!1&&p.adj(2,h.wday-p.getDay())}return p},_event:function(t,a){var n,i=e(this).data("jtsage-datebox"),o=e(this).data("jtsage-datebox").options;if(!t.isPropagationStopped())switch(a.method){case"close":"undefined"==typeof a.closeCancel&&(a.closeCancel=!1),i.cancelClose=a.closeCancel,i.close();break;case"open":i.open();break;case"set":"object"==typeof a.value?(i.theDate=a.value,i._t({method:"doset"})):(e(this).val(a.value),o.linkedField!==!1&&e(o.linkedField).val(i.callFormat(o.linkedFieldFormat,i.theDate,!1)),e(this).trigger("change"));break;case"doset":n="_"+i.options.mode+"DoSet",e.isFunction(i[n])?i[n].apply(i,[]):i._t({method:"set",value:i._formatter(i.__fmt(),i.theDate),date:i.theDate});break;case"dooffset":a.type&&i._offset(a.type,a.amount,!0);break;case"dorefresh":i.refresh();break;case"doclear":e(this).val("").trigger("change");break;case"clear":e(this).trigger("change")}},_build:{"default":function(){this.d.headerText="Error",this.d.intHTML!==!1&&this.d.intHTML.remove().empty(),this.d.intHTML=e("<div class='ui-body-b'><h2 style='text-align:center' class='bg-danger'>Unknown Mode</h2></div>")},timeflipbox:function(){this._build.flipbox.apply(this)},durationflipbox:function(){this._build.flipbox.apply(this)},flipbox:function(){var t,a,n,i,o,s,r,d,u,l=this,c=this.options,p=this.drag,h={},f=["d","h","i","s"],m="durationflipbox"===c.mode?!0:!1,b="ui-datebox-",g=e("<div class='ui-overlay-shadow'><ul></ul></div>"),_=e("<div>",{"class":b+"flipcontent"}),D=l.theDate.getTime()-l.initDate.getTime(),y=""+("jqm"===l.baseMode?"ui-body-":"")+("bootstrap"===l.baseMode||"bootstrap4"===l.baseMode?"bg-":""),v=l._dur(0>D?0:D);if(0>D?(l.lastDuration=0,m&&l.theDate.setTime(l.initDate.getTime())):m&&(l.lastDuration=D/1e3),"boolean"!=typeof l.d.intHTML?l.d.intHTML.empty().remove():l.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&l._fbox_pos()}),l.d.headerText=l._grabLabel()!==!1?l._grabLabel():"flipbox"===c.mode?l.__("titleDateDialogLabel"):l.__("titleTimeDialogLabel"),l.d.intHTML=e("<span>"),e(document).one("popupafteropen",function(){l._fbox_pos()}),l.fldOrder="flipbox"===c.mode?l.__("dateFieldOrder"):m?l.__("durationOrder"):l.__("timeFieldOrder"),m?(c.minDur!==!1&&l.theDate.getEpoch()-l.initDate.getEpoch()<c.minDur&&(l.theDate=new Date(l.initDate.getTime()+1e3*c.minDur),l.lastDuration=c.minDur,v=l._dur(1e3*c.minDur)),c.maxDur!==!1&&l.theDate.getEpoch()-l.initDate.getEpoch()>c.maxDur&&(l.theDate=new Date(l.initDate.getTime()+1e3*c.maxDur),l.lastDuration=c.maxDur,v=l._dur(1e3*c.maxDur))):(l._check(),l._minStepFix()),"flipbox"===c.mode&&e(l._spf("<div class='{cls}'><h4>{text}</h4></div>",{cls:b+"header",text:l._formatter(l.__("headerFormat"),l.theDate)})).appendTo(l.d.intHTML),m){for(l._fixstepper(l.fldOrder),i=e(l._spf("<div class='{cls}'></div>",{cls:b+"header ui-grid-"+["a","b","c","d","e"][l.fldOrder.length-2]+" row"})),a=0;a<l.fldOrder.length;a++)e(l._spf("<div class='{cls}'>{text}</div>",{text:l.__("durationLabel")[e.inArray(l.fldOrder[a],f)],cls:b+"fliplab ui-block-"+["a","b","c","d","e"][a]+" col-xs-"+12/l.fldOrder.length})).appendTo(i);for(i.appendTo(l.d.intHTML),l.dateOK=!0,h.d=l._fbox_series(v[0],64,"d",!1),h.h=l._fbox_series(v[1],64,"h",v[0]>0),h.i=l._fbox_series(v[2],60,"i",v[0]>0||v[1]>0),h.s=l._fbox_series(v[3],60,"s",v[0]>0||v[1]>0||v[2]>0),_.addClass(b+"flipcontentd"),a=0;a<l.fldOrder.length;a++){s=l.fldOrder[a],d=v[e.inArray(s,f)],n=g.clone().data({field:s,amount:c.durationSteppers[s]}),o=n.find("ul");for(t in h[s])e(l._spf("<li class='{cls}'><span>{text}</span></li>",{text:h[s][t][0],cls:y+(h[s][t][1]!==d?c.themeDate:c.themeDatePick)})).appendTo(o);n.appendTo(_)}}for(a=0;a<l.fldOrder.length&&!m;a++){if(d=l.fldOrder[a],n=g.clone().data({field:d,amount:"i"===d?c.minuteStep:1}),o=n.find("ul"),"function"==typeof l._fbox_mktxt[d]){for(t=-1*c.flen[d];t<c.flen[d]+1;t++)e(l._spf("<li class='{cls}'><span>{text}</span></li>",{cls:y+(0!==t?c.themeDate:c.themeDatePick),text:l._fbox_mktxt[d].apply(l,["i"===d?t*c.minuteStep:t])})).appendTo(o);n.appendTo(_)}if("a"===d&&12===l.__("timeFormat")){for(u=e("<li class='"+y+c.themeDate+"'><span></span></li>"),i=l.theDate.get(3)>11?[c.themeDate,c.themeDatePick,2,5]:[c.themeDatePick,c.themeDate,2,3],t=-1*i[2];t<i[3];t++)0>t||t>1?u.clone().appendTo(o):e(l._spf("<li class='{cls}'><span>{text}</span></li>",{cls:y+i[t],text:l.__("meridiem")[t]})).appendTo(o);n.appendTo(_)}}l.d.intHTML.append(_),e("<div>",{"class":b+"flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(l.d.intHTML),(c.useSetButton||c.useClearButton||c.useCancelButton||c.useTodayButton||c.useTomorrowButton)&&(r=e("<div>",{"class":b+"controls"}),c.useSetButton&&r.append(l._stdBtn.close.apply(l,["flipbox"===c.mode?l.__("setDateButtonLabel"):m?l.__("setDurationButtonLabel"):l.__("setTimeButtonLabel")])),c.useTodayButton&&r.append(l._stdBtn.today.apply(l)),c.useTomorrowButton&&r.append(l._stdBtn.tomorrow.apply(l)),c.useClearButton&&r.append(l._stdBtn.clear.apply(l)),c.useCancelButton&&r.append(l._stdBtn.cancel.apply(l)),l._controlGroup(r).appendTo(l.d.intHTML)),l.wheelExists&&l.d.intHTML.on("mousewheel",".ui-overlay-shadow",function(t,a){t.preventDefault(),l._offset(e(this).data("field"),(0>a?1:-1)*e(this).data("amount"))}),l.d.intHTML.on(p.eStart,"ul",function(t,a){p.move||("undefined"!=typeof a&&(t=a),p.move=!0,p.target=e(this).find("li").first(),p.pos=parseInt(p.target.css("marginTop").replace(/px/i,""),10),p.start="touch"===t.type.substr(0,5)?t.originalEvent.changedTouches[0].pageY:t.pageY,p.end=!1,p.direc=m?-1:1,p.velocity=0,p.time=Date.now(),t.stopPropagation(),t.preventDefault())})}},_drag:{"default":function(){return!1},timeflipbox:function(){this._drag.flipbox.apply(this)},durationflipbox:function(){this._drag.flipbox.apply(this)},flipbox:function(){var t=this,a=this.options,n=this.drag;e(document).on(n.eMove,function(e){return n.move&&"flipbox"===a.mode.slice(-7)?(n.end="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageY:e.pageY,n.target.css("marginTop",n.pos+n.end-n.start+"px"),n.elapsed=Date.now()-n.time,n.velocity=.8*(100*(n.end-n.start)/(1+n.elapsed))+.2*n.velocity,e.preventDefault(),e.stopPropagation(),!1):void 0}),e(document).on(n.eEnd,function(e){var i,o,s,r,d,u,l;n.move&&"flipbox"===a.mode.slice(-7)&&(n.velocity<15&&n.velocity>-15||!a.useKinetic?(n.move=!1,n.end!==!1&&(e.preventDefault(),e.stopPropagation(),n.tmp=n.target.parent().parent(),t._offset(n.tmp.data("field"),parseInt((n.start-n.end)/(n.target.outerHeight()-2),10)*n.tmp.data("amount")*n.direc)),n.start=!1,n.end=!1):(n.move=!1,n.start=!1,n.end=!1,n.tmp=n.target.parent().parent(),i=n.target.outerHeight(),o=-(.8*n.velocity)*Math.exp(-n.elapsed/325)*8*-1,s=parseInt(n.target.css("marginTop").replace(/px/i,""),10),r=parseInt(s+o,10),d=n.pos-r,u=Math.round(d/i),l=u*n.tmp.data("amount")*n.direc,n.target.animate({marginTop:r},parseInt(1e4/n.velocity)+1e3,function(){t._offset(n.tmp.data("field"),l)}),e.preventDefault(),e.stopPropagation()))})}},_offset:function(t,a,n){var i,o=this,s=this.options,r=this.theDate,d=!1,u=!1,l=32-o.theDate.copy([0],[0,0,32,13]).getDate(),c=!1;if(t=(t||"").toLowerCase(),c=e.inArray(t,["y","m","d","h","i","s"]),"undefined"==typeof n&&(n=!0),"a"===t||"undefined"!=typeof s.rolloverMode[t]&&s.rolloverMode[t]!==!0)switch(t){case"y":d=0;break;case"m":o._btwn(r.get(1)+a,-1,12)?d=1:(i=r.get(1)+a,u=0>i?[1,12+i]:[1,i%12]);break;case"d":o._btwn(r.get(2)+a,0,l+1)?d=2:(i=r.get(2)+a,u=1>i?[2,l+i]:[2,i%l]);break;case"h":o._btwn(r.get(3)+a,-1,24)?d=3:(i=r.get(3)+a,u=0>i?[3,24+i]:[3,i%24]);break;case"i":o._btwn(r.get(4)+a,-1,60)?d=4:(i=r.get(4)+a,u=0>i?[4,59+i]:[4,i%60]);break;case"s":o._btwn(r.get(5)+a,-1,60)&&(d=5);break;case"a":o._offset("h",12*(a>0?1:-1),!1)}else d=c;d!==!1?o.theDate.adj(d,a):o.theDate.setD(u[0],u[1]),n===!0&&o.refresh(),s.useImmediate&&o._t({method:"doset"}),o.calBackDate!==!1&&o._t({method:"displayChange",selectedDate:o.calBackDate,shownDate:o.theDate,thisChange:t,thisChangeAmount:a}),o._t({method:"offset",type:t,amount:a,newDate:o.theDate})},_startOffset:function(e){var t=this.options;return t.startOffsetYears!==!1&&e.adj(0,t.startOffsetYears),t.startOffsetMonths!==!1&&e.adj(1,t.startOffsetMonths),t.startOffsetDays!==!1&&e.adj(2,t.startOffsetDays),e},getTheDate:function(){return this.calBackDate!==!1?this.calBackDate:this.theDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return this.calDateVisible},setTheDate:function(e){"object"==typeof e?this.theDate=e:this.theDate=this._makeDate(e),this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a,n=this;return n.fmtOver=e,a=n._makeDate(t),n.fmtOver=!1,a},callFormat:function(e,t,a){return"undefined"==typeof a&&(a=!1),this._formatter(e,t,a)},refresh:function(){var e=this,t=this.options;"undefined"==typeof e._build[t.mode]?e._build["default"].apply(e,[]):e._build[t.mode].apply(e,[]),e.__("useArabicIndic")===!0&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var a,n,i,o,s=this,r=this.options,d=new this._date,u=864e5;a=s._pa([0,0,0],d),"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0),t!==!0&&r.minDays!==!1||"undefined"==typeof s.d.input.attr("min")||(n=s.d.input.attr("min").split("-"),i=new s._date(n[0],n[1]-1,n[2],0,0,0,0),o=(i.getTime()-a.getTime())/u,r.minDays=parseInt(-1*o,10)),t!==!0&&r.maxDays!==!1||"undefined"==typeof s.d.input.attr("max")||(n=s.d.input.attr("max").split("-"),i=new s._date(n[0],n[1]-1,n[2],0,0,0,0),o=(i.getTime()-a.getTime())/u,r.maxDays=parseInt(o,10)),e===!0&&s._t({method:"refresh"})},_dur:function(t){var a=[t/864e5,t/36e5%24,t/6e4%60,t/1e3%60];return e.each(a,function(e,t){0>t?a[e]=0:a[e]=Math.floor(t)}),a},__:function(e){var t=this.options,a=t.lang[t.useLang],n=t[t.mode+"lang"],i="override"+e.charAt(0).toUpperCase()+e.slice(1);return"undefined"!=typeof t[i]?t[i]:"undefined"!=typeof a&&"undefined"!=typeof a[e]?a[e]:"undefined"!=typeof n&&"undefined"!=typeof n[e]?n[e]:"undefined"!=typeof t.lang["default"][e]?t.lang["default"][e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if("undefined"!=typeof e.fmtOver&&e.fmtOver!==!1)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return"undefined"!=typeof t&&"-"===t?String(e):(10>e?"0":"")+String(e)},_dRep:function(e,t){var a,n,i=48,o=57,s=1584,r="";for(-1===t&&(i+=s,o+=s,s=-1584),n=0;n<e.length;n++)a=e.charCodeAt(n),r+=a>=i&&o>=a?String.fromCharCode(a+s):String.fromCharCode(a);return r},_doIndic:function(){var t=this;t.d.intHTML.find("*").each(function(){e(this).children().length<1?e(this).text(t._dRep(e(this).text())):e(this).hasClass("ui-datebox-slideday")&&e(this).html(t._dRep(e(this).html()))}),t.d.intHTML.find("input").each(function(){e(this).val(t._dRep(e(this).val()))})},_n:function(e,t){return 0>e?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,a){return e>t&&a>e},_grabLabel:function(){var t,a,n=this,i=this.options,o=!1;return"undefined"==typeof i.overrideDialogLabel?(t=n.d.input.attr("placeholder"),a=n.d.input.attr("title"),"undefined"!=typeof t?t:"undefined"!=typeof a?a:(o=e(document).find("label[for='"+n.d.input.attr("id")+"']").text(),""===o?!1:o)):i.overrideDialogLabel},_t:function(e){this.d.input.trigger("datebox",e)},_spf:function(t,a){return e.isArray(a)||e.isPlainObject(a)?t.replace(/{(.+?)}/g,function(e,t){return a[t]}):t},baseMode:"jqm",_stdBtn:{cancel:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("cancelButton")+"</a>").addClass("ui-btn ui-btn-"+a.themeCancelButton+" ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("clearButton")+"</a>").addClass("ui-btn ui-btn-"+a.themeClearButton+" ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(t,a){var n=this,i=this.options;return"undefined"==typeof a&&(a=!1),e("<a href='#' role='button'>"+t+"</a>").addClass("ui-btn ui-btn-"+i.themeSetButton+" ui-icon-check ui-btn-icon-left ui-shadow ui-corner-all"+(n.dateOK===!0?"":" ui-state-disabled")).on(i.clickEventAlt,function(e){e.preventDefault(),n.dateOK===!0&&(a===!1?n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate}):n._t(a),n._t({method:"close"}))})},today:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("todayButtonLabel")+"</a>").addClass("ui-btn ui-btn-"+a.themeTodayButton+" ui-icon-navigation ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t.calBackDate=!1,t._t({method:"doset"})})},tomorrow:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("tomorrowButtonLabel")+"</a>").addClass("ui-btn ui-btn-"+a.themeTomorrowButton+" ui-icon-navigation ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t.calBackDate=!1,t._t({method:"doset"})})}},_destroy:function(){var t=this,a=this.options,n=this.d.wrap.find("a");t.d.wrap.removeClass("ui-input-has-clear"),n.off(),n.remove(),a.lockInput&&t.d.input.removeAttr("readonly"),t.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox");try{t.d.mainWrap.popup("destroy")}catch(i){}e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA)},_create:function(){e(document).trigger("dateboxcreate");var t=this,a=e.extend(this.options,this._getLongOptions(this.element),this.element.data("options")),n=a.theme===!1?e.mobile.getInheritedTheme(this.element):a.theme,i=a.useAnimation?a.transition:"none",o={input:this.element,wrap:this.element.parent(),mainWrap:e("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+i+" ui-body-"+n}).css("zIndex",a.zindex),intHTML:!1},s=".datebox"+this.uuid,r="undefined"!=typeof window.ontouchstart,d={eStart:"touchstart"+s+" mousedown"+s,eMove:"touchmove"+s+" mousemove"+s,eEnd:"touchend"+s+" mouseup"+s,eEndA:["mouseup","touchend","touchcanel","touchmove"].join(s+" ")+s,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};e.extend(t,{d:o,drag:d,touch:r}),a.usePlaceholder!==!1&&(a.usePlaceholder===!0&&""!==t._grabLabel()&&t.d.input.attr("placeholder",t._grabLabel()),"string"==typeof a.usePlaceholder&&t.d.input.attr("placeholder",a.usePlaceholder)),a.theme=n,t.cancelClose=!1,t.calBackDate=!1,t.calDateVisible=!0,t.disabled=!1,t.runButton=!1,t._date=window.Date,t._enhanceDate(),t.baseID=t.d.input.attr("id"),t.initDate=new t._date,t.initDate.setMilliseconds(0),t.theDate=a.defaultValue?t._makeDate():""!==t.d.input.val()?t._makeDate(t.d.input.val()):new t._date,""===t.d.input.val()&&t._startOffset(t.theDate),t.initDone=!1,a.showInitialValue&&t.d.input.val(t._formatter(t.__fmt(),t.theDate)),a.useButton&&a.mode!==!1&&(t.d.wrap.addClass("ui-input-has-clear"),a.buttonIcon===!1&&("time"===a.mode.substr(0,4)||"dur"===a.mode.substr(0,3)?a.buttonIcon=a.buttonIconTime:a.buttonIcon=a.buttonIconDate),e("<a href='#' class='ui-input-clear ui-btn ui-icon-"+a.buttonIcon+" ui-btn-icon-notext ui-corner-all'></a>").attr("title",t.__("tooltip")).text(t.__("tooltip")).appendTo(t.d.wrap).on(a.clickEvent,function(e){e.preventDefault(),a.useFocus?t.d.input.focus():t.disabled||t._t({method:"open"})})),a.hideInput&&t.d.wrap.hide(),a.hideContainer&&t.d.wrap.parent().hide(),t.d.input.on("focus.datebox",function(){t.d.input.addClass("ui-focus"),t.disabled===!1&&a.useFocus&&t._t({method:"open"})}).on("blur.datebox",function(){t.d.input.removeClass("ui-focus")}).on("change.datebox",function(){t.theDate=t._makeDate(t.d.input.val()),t.refresh()}).on("datebox",t._event),a.lockInput&&t.d.input.attr("readonly","readonly"),"undefined"!=typeof e.event.special.mousewheel&&(t.wheelExists=!0),t.d.input.is(":disabled")&&t.disable(),t.applyMinMax(!1,!1),(a.useInline||a.useInlineBlind)&&t.open(),e(document).trigger("dateboxaftercreate")},open:function(){var t=this,a=this.options,n={transition:a.useAnimation?a.transition:"none"},i={history:!1,transition:a.useAnimation?a.transition:"none"};if(a.useFocus&&t.fastReopen===!0)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.calBackDate=!1,""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),"undefined"==typeof t._build[a.mode]?t._build["default"].apply(t,[]):t._build[a.mode].apply(t,[]),"undefined"!=typeof t._drag[a.mode]&&t._drag[a.mode].apply(t,[]),t._t({method:"refresh"}),t.__("useArabicIndic")===!0&&t._doIndic(),(a.useInline||a.useInlineBlind)&&t.initDone===!1){if(t.d.mainWrap.append(t.d.intHTML),a.hideContainer?(a.useHeader&&t.d.mainWrap.prepend(e("<div class='ui-header ui-bar-"+a.themeHeader+"'><h1 class='ui-title'>"+t.d.headerText+"</h1></div>")),t.d.wrap.parent().after(t.d.mainWrap)):t.d.wrap.parent().append(t.d.mainWrap),t.d.mainWrap.removeClass("ui-datebox-hidden ui-overlay-shadow"),a.useInline)return t.d.mainWrap.addClass("ui-datebox-inline").css("zIndex","auto"),a.hideInput||a.hideContainer||t.d.mainWrap.addClass("ui-datebox-inline-has-input"),setTimeout(function(e){return function(){e._t({method:"postrefresh"})}}(t),100),!0;t.d.mainWrap.addClass("ui-datebox-inline ui-datebox-inline-has-input").css("zIndex","auto"),t.d.mainWrap.hide(),t.initDone=!1,t._t({method:"postrefresh"})}return a.useInlineBlind?(t.initDone?(t.refresh(),t.d.mainWrap.slideDown(),t._t({method:"postrefresh"})):t.initDone=!0,!0):t.d.intHTML.is(":visible")?!1:(t.d.mainWrap.empty(),a.useHeader&&(t.d.mainWrap.append(e("<a href='#'>Close</a>").addClass("ui-btn-"+a.popupButtonPosition+" ui-link ui-btn ui-btn-"+(a.themeCloseButton===!1?a.themeHeader:a.themeCloseButton)+" ui-icon-delete ui-btn-icon-notext ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})),t.d.mainWrap.append(e("<div class='ui-header ui-bar-"+a.themeHeader+"'><h1 class='ui-title'>"+t.d.headerText+"</h1></div>"))),t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex),t._t({method:"postrefresh"
}),a.popupPosition!==!1?n.positionTo=a.popupPosition:"undefined"!=typeof t.baseID?n.positionTo="#"+t.baseID:n.positionTo="window",a.popupForceX!==!1&&a.popupForceY!==!1&&(n.x=parseInt(a.popupForceX,10),n.y=parseInt(a.popupForceY,10),n.positionTo="origin"),a.useModal&&(i.overlayTheme=a.useModalTheme,i.dismissible=!1),a.openCallback!==!1?(e.isFunction(a.openCallback)||"function"==typeof window[a.openCallback]&&(a.openCallback=window[a.openCallback]),i.afteropen=function(){t._t({method:"postrefresh"}),a.openCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.openCallbackArgs))===!1&&t._t({method:"close"})}):i.afteropen=function(){t._t({method:"postrefresh"})},a.closeCallback!==!1&&(e.isFunction(a.closeCallback)||"function"==typeof window[a.closeCallback]&&(a.closeCallback=window[a.closeCallback]),i.afterclose=function(){a.closeCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration,cancelClose:t.cancelClose}],a.closeCallbackArgs))}),a.beforeOpenCallback!==!1&&(e.isFunction(a.beforeOpenCallback)||"function"==typeof window[a.beforeOpenCallback]&&(a.beforeOpenCallback=window[a.beforeOpenCallback]),a.beforeOpenCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.beforeOpenCallbackArgs))===!1)?!1:void t.d.mainWrap.removeClass("ui-datebox-hidden").popup(i).popup("open",n))},close:function(){var t=this,a=this.options;return t.calBackDate=!1,a.useInlineBlind?(t.d.mainWrap.slideUp(),!0):a.useInline||t.d.intHTML===!1?!0:(t.d.mainWrap.popup("close"),e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA),void(a.useFocus&&(t.fastReopen=!0,setTimeout(function(e){return function(){e.fastReopen=!1}}(t),300))))},disable:function(){var e=this;e.d.input.attr("disabled",!0),e.d.wrap.addClass("ui-state-disabled").blur(),e.disabled=!0,e.d.mainWrap.addClass("ui-state-disabled"),e._t({method:"disable"})},enable:function(){var e=this;e.d.input.attr("disabled",!1),e.d.wrap.removeClass("ui-state-disabled"),e.disabled=!1,e.d.mainWrap.removeClass("ui-state-disabled"),e._t({method:"enable"})},_controlGroup:function(e){var t=this.options;return t.useCollapsedBut?(e.controlgroup({type:"horizontal"}),e.addClass("ui-datebox-collapse")):e.controlgroup(),e},_fbox_pos:function(){var t,a,n,i=0,o=this,s="bootstrap4"===o.baseMode?5:0,r=this.d.intHTML.find(".ui-datebox-flipcontent").innerHeight();o.d.intHTML.find(".ui-datebox-flipcenter").each(function(){a=e(this),i=-1*(r/2-a.innerHeight()/2-3)+s,a.css("top",i)}),o.d.intHTML.find("ul").each(function(){a=e(this),r=a.parent().innerHeight(),n=a.find("li").first(),t=a.find("li").last().offset().top-a.find("li").first().offset().top,n.css("marginTop",-1*((t-r)/2+n.outerHeight()))})},_fbox_series:function(e,t,a,n){for(var i,o,s=this.options,r="h"===a?24:60,d=[[e.toString(),e]],u=1;t>=u;u++)i=e+u*s.durationSteppers[a],o=e-u*s.durationSteppers[a],d.unshift([i.toString(),i]),o>-1?d.push([o.toString(),o]):n?d.push([(r+o).toString(),o]):d.push(["",-1]);return d},_fbox_mktxt:{y:function(e){return this.theDate.get(0)+e},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return this.__("monthsOfYearShort")[t.get(1)]},d:function(e){var t=this,a=this.options;if(a.rolloverMode===!1||"undefined"!=typeof a.rolloverMode.d&&a.rolloverMode.d===!1){var n=this.theDate.get(2),i=32-t.theDate.copy([0],[0,0,32,13]).getDate(),o=n+e;return 1>o?i+o:o%i>0?o%i:i}return this.theDate.copy([0,0,e]).get(2)},h:function(e){var t=this.theDate.copy([0,0,0,e]);return 12===this.__("timeFormat")?t.get12hr():t.get(3)},i:function(e){return this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))}}})}(jQuery);
//# sourceMappingURL=jtsage-datebox.js.map